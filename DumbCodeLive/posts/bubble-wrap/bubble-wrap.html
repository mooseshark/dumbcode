<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../dumbcode.css">
    <link rel="stylesheet" href="bubble-wrap.css">
    <link rel="stylesheet" href="../code-highlight/atom-one-light.css">
    <script src="../code-highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <title>Dumb Code</title>
  </head>
  <body>
    <nav class="navbar sticky-top navbar-expand-md navbar-dark" style="background-color: #a79aff; color: #ffffff">
      <a class="navbar-brand" href="../../index.html">
        <svg class="bi bi-trash-fill" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z" clip-rule="evenodd"/>
        </svg>
        <svg class="bi bi-code-slash" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M4.854 4.146a.5.5 0 010 .708L1.707 8l3.147 3.146a.5.5 0 01-.708.708l-3.5-3.5a.5.5 0 010-.708l3.5-3.5a.5.5 0 01.708 0zm6.292 0a.5.5 0 000 .708L14.293 8l-3.147 3.146a.5.5 0 00.708.708l3.5-3.5a.5.5 0 000-.708l-3.5-3.5a.5.5 0 00-.708 0zm-.999-3.124a.5.5 0 01.33.625l-4 13a.5.5 0 01-.955-.294l4-13a.5.5 0 01.625-.33z" clip-rule="evenodd"/>
        </svg>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="../../index.html"><b>Posts</b></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../../purpose.html"><b>Purpose</b></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../../personality.html"><b>Personality</b></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../../prosperity.html"><b>Prosperity</b></a>
          </li>
          <li class="nav-item d-block d-lg-none">
            <a class="nav-link" href="../../sitemap.html"><b>Site Map</b></a>
          </li>
        </ul>
      </div>
      <div class="d-none d-lg-block">
        <ul class="nav justify-content-end">
          <li class="nav-item">
            <a class="tw-ic mr-3" style="color:white;" role="button" href="https://twitter.com/moosesharkgames" rel="noopener noreferrer" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="row">
        <section class="col">
      		<div class="h1 d-none d-lg-block" style="text-align:center"><strong>Pop Some Virtual Bubble Wrap</strong></div>
          <div  class="h4 d-block d-lg-none" style="text-align:center"><strong>Pop Some Virtual Bubble Wrap</strong></div>
          
          <h4>What is this?</h4>

          <p>
            I guess it’s bubble wrap. 
          </p>

          <div class="text-center">
            <img src="images\bubble-wrap.jpg" class="img-fluid" alt="Responsive image">
          </div>
          
          <p>
            Actually, maybe an exercise in theme swapping. A little bit of a programmatical math problem, 
            but not a very hard one cause it could definitely be better. For sure it’s a randomized sound board depending 
            on the selected theme. Honestly, it’s a warning about running with your main idea with no plan, then allowing 
            for infinite scope creep. Eventually you have to find a cutoff and that’s how I ended up with what you see here.
          </p>

          <p>
            At the very least, it’s fun to play with for a little bit, just to see what noises you get from the bubbles. I recommend “cat” if you have one. <i class="fa-regular fa-face-smile"></i>
          </p>

          <h4>The Wrap</h4>
          
          <button type="button" class="btn btn-outline-read btn-md btn-grid" id="resetId" value="Reset" onclick="resetPage();" style="margin-bottom: 5px;">Reset <i class="fa-solid fa-arrows-rotate"></i></button>
          
          <div>            
            <span class="btn-group btn-group-toggle" data-toggle="buttons" id="button-toggle-group">
              <label class="btn btn-outline-read btn-md btn-grid active">
                <input type="radio" name="options" id="traditional" styletheme="round-button-traditional" sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off" checked> Traditional
              </label>
              <label class="btn btn-outline-read btn-md btn-grid active"> 
                <input type="radio" name="options" id="fun" styletheme="round-button-fun" sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"> Fun
              </label>
              <label class="btn btn-outline-read btn-md btn-grid">
                <input type="radio" name="options" id="cat" styletheme="round-button-cat" sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"> Cats
              </label>
              <label class="btn btn-outline-read btn-md btn-grid">
                <input type="radio" name="options" id="magnitude" styletheme="round-button-magnitude" sheetsize="30" onchange="selectTheme(this.id)" autocomplete="off"> Magnitude
              </label>
              <label class="btn btn-outline-read btn-md btn-grid">
                <input type="radio" name="options" id="all" styletheme="round-button-all" sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"> All 
              </label>
            </span>
          </div>

          <div id="bubble-wrap" class="bubble-wrap">

          </div>

          <div class="h4"><strong>The HTML Source.</strong></div>

          <p>
            I don’t always include any of the HTML in these little projects. It’s usually pretty insignificant. In this case, the 
            theme navigation contributes pretty greatly to what theme is loaded, the amount of bubbles generated and the audio that’s played.
          </p>

          <p>
            This little section also becomes pretty relevant during the reset button’s action. It’s pretty far down in the JS section, but you 
            can see how I’m pulling the selected active item. It’s probably a pretty terrible way to go about things and truthfully, all the 
            theme retention could have been handled better with cookies, but I thought of that after finishing the current set up. My main 
            goal was to avoid setting and checking global variables, which the current setup avoids well enough.
          </p>

          <div class="text-center">
            <pre><code class="html hljs">
&lt;button type="button" 
    class="btn btn-outline-read btn-md btn-grid" 
    id="resetId" value="Reset" 
    onclick="resetPage();" 
    style="margin-bottom: 5px;"&gt;
      Reset &lt;i class="fa-solid fa-arrows-rotate"&gt;&lt;/i&gt;
&lt;/button&gt;

&lt;div&gt;            
&lt;span class="btn-group btn-group-toggle" data-toggle="buttons" id="button-toggle-group"&gt;
  &lt;label class="btn btn-outline-read btn-md btn-grid active"&gt;
  &lt;input type="radio" name="options" id="traditional" styletheme="round-button-traditional" 
            sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off" checked&gt; Traditional
  &lt;/label&gt;
  &lt;label class="btn btn-outline-read btn-md btn-grid active"&gt; 
  &lt;input type="radio" name="options" id="fun" styletheme="round-button-fun" 
            sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"&gt; Fun
  &lt;/label&gt;
  &lt;label class="btn btn-outline-read btn-md btn-grid"&gt;
  &lt;input type="radio" name="options" id="cat" styletheme="round-button-cat" 
            sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"&gt; Cats
  &lt;/label&gt;
  &lt;label class="btn btn-outline-read btn-md btn-grid"&gt;
  &lt;input type="radio" name="options" id="magnitude" styletheme="round-button-magnitude" 
            sheetsize="30" onchange="selectTheme(this.id)" autocomplete="off"&gt; Magnitude
  &lt;/label&gt;
  &lt;label class="btn btn-outline-read btn-md btn-grid"&gt;
  &lt;input type="radio" name="options" id="all" styletheme="round-button-all" 
            sheetsize="100" onchange="selectTheme(this.id)" autocomplete="off"&gt; All 
  &lt;/label&gt;
&lt;/span&gt;
&lt;/div&gt;
            </code></pre>
          </div>

          <div class="h4"><strong>The JS Source.</strong></div>

          <p>
            Most of the JavasScript is relatively plain. The only things really worth calling out are the 
            <strong>generateSheet</strong> function and the <strong>resetPage</strong> function. 
          </p>

          <p>
            The generateSheet function isn’t all that complicated but does a few funky checks to set certain 
            values on the bubbles as they generate depending on the selected theme. The bubble offset is a 
            combination of the container size and a mod check to programmatically set a margin on every other 
            row. It’s a pretty cheap way of creating the effect, but it works. Setting the color for the “Fun” 
            theme is just a counter in the loop where the count resets after all the colors from an array have 
            been used in a sequence. The reset of the loop is setting things like bubble icons and styles.  
          </p>

          <p>
            The resetPage function is also pretty simple. It destroys the old sheet and sets up all the 
            values to generate a new one. The interesting part is pulling the active tag from the class 
            of the selected theme, then using that tag to work out the theme, audio cues, and number of 
            bubbles to generate. It’s not complicated, but some of the attributes weren’t easily accessible. 
            As mentioned above, all of this could have been avoided by setting globals or cookies. There’s 
            probably other ways to get the active tag, or maybe a better way to set that flag on the elements as well.
          </p>

          <div class="text-center">
            <pre><code class="javascript hljs">
document.onreadystatechange = function () {
  if (document.readyState == "complete") {
    generateSheet('traditional','round-button-traditional',100);
  }
};

/*
  * Handle Generating Bubble Wrap
*/
function selectTheme(audioTheme) {
  let styleTheme = document.getElementById(audioTheme).getAttribute('styletheme')
  let selectedTheme = audioTheme || 'traditional';
  let sheetSize = document.getElementById(audioTheme).getAttribute('sheetsize')

  resetPage(selectedTheme,styleTheme,sheetSize);
}

function generateSheet(audioTheme, styleTheme, sheetSize) {
  let count = 0;
  let rainbow = ['#FFADAD', '#FFD6A5', '#FDFFB6', '#CAFFBF', '#9BF6FF', '#A0C4FF', '#BDB2FF', '#FFC6FF', '#FFFFFC'];
  let wrap = document.getElementById('bubble-wrap')

  for (let i = 0; i &lt; sheetSize; i++){
    let btn = document.createElement('button');
    btn.setAttribute('type', 'button');
    btn.setAttribute('id', i);
    btn.setAttribute('audiotheme', assignAudio(audioTheme))
    btn.setAttribute('class', styleTheme);	

    if (i%10 === 0 && parseInt(i.toString().substring(0,1))%2 && audioTheme != 'magnitude') {
      btn.style.marginLeft = '16px'
    }

    if (i%3 === 0 && (i/3)%2 === 0 && audioTheme == 'magnitude') {
      btn.style.marginLeft = '32px'
    } else if(count != 2 && audioTheme == 'magnitude') {
      count++;
    }

    if (audioTheme == 'fun') {
      btn.style.backgroundColor = rainbow[count];

      count++;

      if(count === 7){
        count = 0;
      }			
    }

    btn.addEventListener('click', popBubble);

    if (audioTheme === 'cat'){		
      let cat = document.createElement('i');
      cat.setAttribute('class', 'fa-solid fa-cat');
      btn.appendChild(cat);
    }

    if (audioTheme === 'all'){		
      let all = document.createElement('i');
      all.setAttribute('class', 'fas fa-question');
      btn.appendChild(all);
    }

    wrap.appendChild(btn)
  }
}

function popBubble() {
  let audio = new Audio(`audio/${this.getAttribute('audiotheme')}`);

  audio.play();

  theme = this.getAttribute('class');

  this.setAttribute('class', `${theme}-popped`);
  this.removeEventListener('click', popBubble);
}

function resetPage(selectedTheme,styleTheme,sheetSize) {
  if (!selectedTheme || !styleTheme || !sheetSize){

    let themeButtonToggleGroup = document.getElementById("button-toggle-group").children;

    for (let b = 0; b &lt; themeButtonToggleGroup.length; b++){
      if (themeButtonToggleGroup[b].getAttribute('class').includes('active')){
        el = themeButtonToggleGroup[b];
        break;
      }
    }

    selectedTheme = el.childNodes[1].getAttribute('id');
    styleTheme = el.childNodes[1].getAttribute('styletheme');
    sheetSize = el.childNodes[1].getAttribute('sheetsize');
  }

  
  let childrenLen = document.getElementById("bubble-wrap").children.length

  for(let i = 0; i &lt;= childrenLen; i++){
    let bubble = document.getElementById(i);

    if (bubble)
        bubble.parentNode.removeChild(bubble);
  }

  if (document.getElementById("bubble-wrap").children.length === 0)
    generateSheet(selectedTheme,styleTheme,sheetSize)
}

/*
  * Handle Audio
*/
function assignAudio(theme) {
  const traditional = ['bubble_crack_pop_2.mp3'];
  const fun = ['bubble_cork_1.mp3','bubble_cork_2.mp3','bubble_crack_pop_1.mp3','bubble_crack_pop_2.mp3',
               'bubble_double_drip_1.mp3','bubble_light_pop_1.mp3','bubble_light_pop_2.mp3',
               'bubble_light_pop_3.mp3','bubble_pop_1.mp3','bubble_pop_2.mp3','bubble_pop_3.mp3',
               'bubble_pop_woosh_1.mp3'];
  const cat = ['kitten_meow_1.mp3','kitten_meow_2.mp3','kitten_meow_3.mp3','long_meow_1.mp3','meow_1.mp3',
               'meow_2.mp3','meow_3.mp3','meow_4.mp3','meow_5.mp3','meow_6.mp3','meow_7.mp3',
               'meow_angry_1.mp3','meow_angry_2.mp3','meow_angry_3.mp3','perfect_meow_1.mp3',
               'purr_meow_1.mp3','purr_meow_2.mp3','purr_meow_3.mp3'];
  const magnitude = ['magnitude_pop_pop.mp3']
  const all = fun.concat(cat).concat(magnitude);
  let audioTheme;

  switch(theme){
    case 'traditional':
      audioTheme = traditional;
      break;
    case 'fun':
      audioTheme = fun;
      break;
    case 'cat':
      audioTheme = cat;
      break;
    case 'magnitude':
      audioTheme = magnitude;
      break;
    case 'all':
      audioTheme = all;
      break;
    default:
      audioTheme = traditional;
      break;
  }

  playAudio = shuffleAudio(audioTheme);

  return playAudio[0];
  }

function shuffleAudio(array) {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle.
  while (currentIndex != 0) {

    // Pick a remaining element.
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
    array[randomIndex], array[currentIndex]];
  }

  return array;
}
          </code></pre>
        </div>

        <div class="h4"><strong>Conclusions</strong></div>

        <p>
          Always finish your projects, even if it comes out kind of bad and you had no plan and everything 
          about it is a little sketchy. A finished project is still better than an unfinished project. 
        </p>

        <div class="h4"><strong>Additional Credits</strong></div>

        <p>
          I used a bit of button effects from <a href="https://codepen.io/ysoftaoglu/pen/qZRGzK" rel="noopener noreferrer" target="_blank">Creative Button Hover Collection by Yasin Softaoğlu</a> on codepen. 
          I believe it was specifically the first button in the "TYPE 2" section, but all of the effects were really cool. 
        </p>

        <p>
          The CSS for the round buttons originally comes from 
          <a href="https://stackoverflow.com/questions/37373734/fully-circular-buttons-with-dynamic-size" rel="noopener noreferrer" target="_blank">a thread on stackoverflow with the answer by user G-Cyrillus</a>. 
          I ended up modifying it a bit, but the original designs were from the example in the answer. 
        </p>

        </section>
      </div>
    </div>

    <div class="d-none d-lg-block">
      <nav class="navbar sticky-bottom navbar-expand-md navbar-dark d-flex justify-content-around" style="background-color: #A79AFF;">
        <div>
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link" href="mailto:dumbcodedotdev@gmail.com"><b>Contact</b></a>
            </li>
          </ul>
        </div>
        <a class="navbar-brand" href="../../index.html">
          <svg class="bi bi-trash-fill" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z" clip-rule="evenodd"/>
          </svg>
          <strong>Dumb</strong>
          <svg class="bi bi-code-slash" width="2em" height="2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M4.854 4.146a.5.5 0 010 .708L1.707 8l3.147 3.146a.5.5 0 01-.708.708l-3.5-3.5a.5.5 0 010-.708l3.5-3.5a.5.5 0 01.708 0zm6.292 0a.5.5 0 000 .708L14.293 8l-3.147 3.146a.5.5 0 00.708.708l3.5-3.5a.5.5 0 000-.708l-3.5-3.5a.5.5 0 00-.708 0zm-.999-3.124a.5.5 0 01.33.625l-4 13a.5.5 0 01-.955-.294l4-13a.5.5 0 01.625-.33z" clip-rule="evenodd"/>
          </svg>
          <strong>Code</strong>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div>
          <ul class="nav">
            <li class="nav-item">
              <a class="tw-ic mr-3" style="color:white;" role="button" href="https://twitter.com/moosesharkgames" rel="noopener noreferrer" target="_blank"><i class="fab fa-twitter fa-2x"></i></a>
            </li>
          </ul>
        </div>
      </nav>
    </div>

    <div>
      <div class="sub-footer d-none d-lg-block">
          <i class="fab fa-resistance" data-toggle="tooltip" data-placement="top" title="May the force be with you."></i><span class="reserved">©2022. All Rights Reserved</span>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/f27865c479.js" crossorigin="anonymous"></script>
    <script>
      $(function () {
        $('[data-toggle="tooltip"]').tooltip()
      });
    </script>
    <script type="text/javascript" src="bubble-wrap.js"></script>
  </body>
</html>
